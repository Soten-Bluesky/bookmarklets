javascript:(()=>{"use strict";window.CONCAT_BOOKMARKLETS?document.body.append(window.CONCAT_BOOKMARKLETS):(console.group("Concat bookmarklets 1.0.0 2018/12/27: How to use."),console.log("表示されるパネルの中に結合したいブックマークレットを追加していきます。"),console.log("結合ボタンを押下することで、対象のブックマークレットを結合することができます。"),console.log("結合したブックマークレットの実行内容は、結合したブックマークレットの実行後に`CONCAT_BOOKMARKLETS.executed`から確認することができます。"),console.log("GitHub： https://github.com/Soten-Bluesky/bookmarklets/tree/master/複数のブックマークレットを結合する.js"),window.CONCAT_BOOKMARKLETS=document.createElement("concat-bookmarklets"),(()=>{const e=window.CONCAT_BOOKMARKLETS,t=e.attachShadow({mode:"closed"}),o=(()=>{const o=document.createDocumentFragment(),n=document.createElement("style"),a=document.createElement("button"),r=document.createElement("button"),l=document.createElement("div"),i=document.createElement("input"),c=document.createElement("span"),d={close:()=>{e.remove()},getFormSet:function(){const e=document.createDocumentFragment(),t=document.createElement("div"),o=document.createElement("input"),n=document.createElement("input"),a=document.createElement("button"),r=document.createElement("button");return o.placeholder="タスク名",o.setAttribute("aria-label","タスク名"),n.placeholder="javascript:",n.setAttribute("aria-label","結合したいブックマークレットのJavaScriptコード"),t.className="item",a.type="button",a.className="plus",a.innerHTML="<span>追加</span>",a.addEventListener("click",this.add),r.type="button",r.className="delete",r.innerHTML="<span>削除</span>",r.addEventListener("click",this.remove),t.append(o),t.append(n),t.append(a),t.append(r),e.append(t),e},add:function(){const e=d.getFormSet();this.parentNode.after(e)},remove:function(){const{parentNode:e}=this,{previousElementSibling:t,nextElementSibling:o}=e;(t&&"item"===t.className||o&&"item"===o.className)&&e.remove()},concat:(()=>{let e=null,o=()=>{c.setAttribute("aria-hidden","true")};return()=>{const n=[];t.querySelectorAll(".item").forEach(e=>{const t=(()=>{let{value:t}=e.children[1];t=t.replace(/^javascript:/,"");try{return decodeURIComponent(t)}catch(e){return t}})(),o=e.firstElementChild.value||t;n.push({title:o,code:t})}),i.value=`javascript:(() => {const srcSet = ${JSON.stringify(n)}; srcSet.forEach(({title, code}) => {console.log(\`\${title} を実行します\`);try {eval(code);} catch (e) {console.error(e);}});console.log('Done: 次の内容を実行しました。');console.table(srcSet);window.CONCAT_BOOKMARKLETS = window.CONCAT_BOOKMARKLETS || Object.create(null); CONCAT_BOOKMARKLETS.executed = srcSet;})();`,c.setAttribute("aria-hidden","false"),clearTimeout(e),e=setTimeout(o,1e3)}})()};return a.type="button",a.className="close",a.innerHTML="<span>閉じる</span>",a.addEventListener("click",d.close),o.append(a),o.append(n),n.textContent=':host {overflow: auto;max-width: 500px;width: 90vw;margin: auto;line-height: 1.8;font-size: 14px;display: block;position: fixed;left: 0;right: 0;top: 0;bottom: 0;z-index: 999999;background: #fff;box-shadow: 0 0 2px rgba(0, 0, 0, .4);max-height: 90vh;padding: 10px;} * {box-sizing: border-box;}.close::before,.close::after,.plus::before,.plus::after,.delete::before,.delete::after {content: ""; width: 3px;background: #aaa;display: block;left: 0;right: 0;top: 0;bottom: 0;margin: auto;z-index: 0;position: absolute;}.plus::before,.plus::after,.delete::before,.delete::after {height: 11px;}.close::before, .close::after {height: 21px;}.close::before, .delete::before {transform: rotate(-45deg);}.close::after, .delete::after {transform: rotate(45deg);} .close {height: 30px;width: 30px;margin: 0 0 10px;} input, button {display: block;} button {position: relative; border: 0;background: transparent;} button span {position: absolute; width: 0; height: 0; overflow: hidden; display: block; z-index: -1;} input {border: 0;background: transparent;width: 100%; padding: 10px 40px 10px 10px; margin: 0 0 8px;font-weight: bold;} input + input {background:#fff;box-shadow: 1px 1px 1px rgba(0, 0, 0, .2);font-weight: normal;} .item {background: #efefef;padding: 10px;position: relative; margin: 0 0 70px;} .plus,.delete {position: absolute;} .plus {border: 1px solid #aaa; border-radius: 80px; height: 39px; width: 39px; background: #fff;margin: 10px auto 0; left: 0; right: 0; top: 100%;}.plus::after {transform: rotate(90deg);} .delete {border: 0;background: transparent;right: 10px;top: 10px; width: 30px; height: 30px;} .item:nth-child(3):nth-last-child(3) .delete {display: none;} .resultWrap {margin: 10px 0 0;}.result {border: 1px solid #ccc; background: #333; color: #fff;}.concat {background: #04b8c3;color: #fff;padding: 4px 12px;border-radius: 5px;}.resultWrap span {display: block;color: #398700;font-weight: bold;text-align: center;} .resultWrap  [aria-hidden="true"] {opacity: 0;transition: .2s opacity ease-out;}',o.append(d.getFormSet()),r.textContent="結合する",r.type="button",r.className="concat",r.addEventListener("click",d.concat),o.append(r),c.textContent="結合しました！",c.setAttribute("aria-hidden","true"),l.className="resultWrap",i.className="result",i.placeholder="結合結果",i.setAttribute("aria-label","結合結果"),i.readOnly=!0,l.append(i),l.append(c),o.append(l),o})();t.append(o),document.body.append(e)})())})();